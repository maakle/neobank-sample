# Passbase

To integrate the Passbase SDK, follow this guide and use your
own API Key which you can obtain from the developer dashboard.

The integration of the Passbase Web SDK follows a few simple steps:

1. Install the SDK through NPM / Yarn
2. Get an API Key
3. Render a Passbase verification button and handle the result

Additionally, a non package manager dependant solution, based on HTML script tag, can be found at At [Passbase doc website](https://docs.passbase.com/).

# 1. Install the SDK

```bash
# NPM
npm install --save @passbase/button

# Yarn
yarn add @passbase/button
```

# 2. Get an API Key

Passbase uses API keys to allow access to the API and route it back to your dashboard. You need to register on our website to create a new Passbase API key here: [Developer Dashboard](https://app.passbase.com).

# 3. Render the verification button

**Import the Passbase SDK**

```javascript
import Passbase from "@passbase/button";
```

The SDK supports UMD modules, we present here the ES import method.

**Handling Verifications**

Verification is an asynchronous process that gives you a callback based result.

The callback method give you the ability to react on if a user verification is finished. e.g. bring the user to another screen.

Also, you can use callbacks for checking if a verification was complete or cancelled. Inside the callback method, you get back the authKey. This key is helpful if you want to ping our API for what the status of a verification is e.g. if it was approved or rejected. It might take a few minutes until a verification is fully processed and of course depend if you approve or reject it in your dashboard.

## A. With a function

**Invoke the button rendering function**

```javascript
renderButton(mountingElement, cb, apiKey, (options = {}));
```

**mountingElement**: The DOM element you want to mount the button on  
**cb**: The callback which will be called on completion, (error, authKey, additionalAttributes) => void  
**apiKey**: The Passbase API Key you obtained from the dashboard.  
**options**: _not required_  
&nbsp;&nbsp;**additionalAttributes**: an object containing attributes that will be stored and retrieved.  
&nbsp;&nbsp;**prefillAttributes**: an object containing attributes used for form prefilling on the button  
&nbsp;&nbsp;&nbsp;&nbsp;**email**: a string defining the user email  
&nbsp;&nbsp;&nbsp;&nbsp;**country**: a string defining the two-letters country code  
&nbsp;&nbsp;**theme**: \__not_required_ - an object containing attributes used for the button's theme  
&nbsp;&nbsp;&nbsp;&nbsp;**accentColor**: a string defining color  
&nbsp;&nbsp;&nbsp;&nbsp;**font**: a string defining the font  
&nbsp;&nbsp;&nbsp;&nbsp;**darkMode**: enables the dark theme
&nbsp;&nbsp;**integrationType**: \__not_required_ - whether the button is integrated at signup or login  


## B. With a React Component

In order to render the component provided by the Passbase SDK, you must install the peer dependencies which the component is leveraging.

```bash
npm install --save react-dom styled-components
```

You can now import and render the component as follows.

```javascript
import VerifyButton from "@passbase/button/react";

<VerifyButton
  apiKey={apiKey}
  integrationType="signup"
  onFinished={(error, authKey, additionalAttributes) => {}}
  additionalAttributes={{
    customer_user_id: "",
    another_attribute: ""
  }}
  prefillAttributes={{
    email: "user@email.com",
    country: "de"
  }}
  theme={{
    accentColor: "#ff0000",
    font: "Fira",
    darkMode: false
  }}
/>;
```

**integrationType**: Whether the button is integrated at signup or login  
**onFinished**: The callback which will be called on completion, (error, authKey, additionalAttributes) => void  
**apiKey**: The Passbase API Key you obtained from the dashboard.  
**additionalAttributes**: _not required_ - an object containing attributes that will be stored and retrieved.  
**prefillAttributes**: _not required_ - an object containing attributes used for form prefilling on the button  
&nbsp;&nbsp;**email**: a string defining the user email  
&nbsp;&nbsp;**country**: a string defining the two-letters country code  
**theme**: \__not_required_ - an object containing attributes used for the button's theme  
&nbsp;&nbsp;**accentColor**: a string defining color  
&nbsp;&nbsp;**font**: a string defining the font  
&nbsp;&nbsp;**darkMode**: enables the dark theme

## Troubleshooting

### ReferenceError: window is not defined

You're likely trying to render the component server side, which is not supported yet.
You should disable SSR in your rendering framework of choice (i.e. NextJS: https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr)
